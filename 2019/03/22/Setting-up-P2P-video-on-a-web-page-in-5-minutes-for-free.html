<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <link rel="preload" href="https://fonts.gstatic.com/s/titilliumweb/v7/NaPecZTIAOhVxoMyOr9n_E7fdMPmDQ.woff2" as="font" crossorigin>
    <link rel="preload" href="https://use.fontawesome.com/releases/v5.9.0/webfonts/fa-solid-900.woff2" as="font" crossorigin>
    <script async src="/assets/script.js"></script>
    <link rel="preconnect" href="https://www.google-analytics.com">
    <link rel="icon" type="image/png" sizes="96x96" href="/images/favicon-96x96.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16.png">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="Consulting & Full Development Cycle">
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-123521518-1"></script>
    <script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments);}gtag('js',new Date());gtag('config','UA-123521518-1');</script>
    <link rel="stylesheet" href="/css/main.css">
    <link rel="stylesheet" href="/css/blog.css">
    <title>Setting up p2p video on a web page in 5 minutes for free</title>
</head>
<body>
<header class="main-header">
    <nav id="navbar" class="container">
        <div class="toggle-wrapper">
            <a href="/"><img class="brand-logo" src="/images/novage-logo.svg" alt="Novage logo"></a>
            <button class="navbar-toggle" aria-label="Toggle navigation"><i class="fas fa-bars"></i></button>
        </div>
        <ul class="menu">
            <li class="menu-item arrow">
                <a><span>P2P Media Loader</span></a>
                <ul class="sub-menu">
                    <li class="sub-menu-item"><a href="/p2p-media-loader/demo.html"><span>Demo</span></a></li>
                    <li class="sub-menu-item"><a href="https://github.com/novage/p2p-media-loader" target="blank"><span>Source Code &amp; Documentation</span></a></li>
                    <li class="sub-menu-item"><a href="/p2p-media-loader/overview.html"><span>Overview</span></a></li>
                    <li class="sub-menu-item"><a href="/p2p-media-loader/technical-overview.html"><span>Technical Overview</span></a></li>
                    <li class="sub-menu-item"><a href="https://github.com/Novage/wt-tracker" target="blank"><span>High-performance WebTorrent tracker</span></a></li>
                </ul>
            </li>
            <li class="menu-item">
                <a href="/blog/blog.html"><span>Blog</span></a>
            </li>
            <li class="menu-item arrow">
                <a><span>Contact</span></a>
                <ul class="sub-menu">
                    <li class="sub-menu-item"><a href="" id="email"></a></li>
                </ul>
            </li>
        </ul>
    </nav>
</header>
<div id="content"><article>
    <header class="page-header">
        <h1 class="title">Setting up p2p video on a web page in 5 minutes for free</h1>
        <div class="arrow">
            <svg width="50px" height="25px" xmlns="http://www.w3.org/2000/svg" version="1.1">
                <polyline points="0,0 50,0 25,25" fill="#333333"></polyline>
            </svg>
        </div>
    </header>

    <div class="single-post container content">
        <div class="content"><p>This article will give you instructions on how to easily, quickly and 100% for free enable P2P video delivery on your HTML5 web pages that stream HLS or MPEG-DASH videos with open-source <a href="https://github.com/novage/p2p-media-loader">P2P Media Loader</a> JavaScript library by <a href="https://novage.com.ua/">Novage</a> (see <a href="http://novage.com.ua/p2p-media-loader/demo.html">the demo</a>).</p>

<p>The approach supports both live and VOD video streams and doesn’t require installing and running any server-side software.</p>

<h2 id="what-are-the-benefits-of-p2p-video">What are the benefits of P2P video?</h2>

<p>In peer-to-peer video delivery network (also called P2P CDN) each player (peer) shares downloaded video segments with other visitors that watch the same stream. Up to 90% of the video can be transferred over a P2P network. This results in:</p>

<ul>
  <li>
    <p>Lower CDN cost — if you pay $100 for a CDN to deliver a stream to your users with 90% P2P ratio you will pay only $10.</p>
  </li>
  <li>
    <p>Higher bandwidth and better adaptive quality — each peer is contributing to the overall bandwidth by simultaneously uploading the video stream to others. And if your source bandwidth allows streaming a video to 100 users, with 90% P2P your video can be viewed by 1000 users.</p>
  </li>
  <li>
    <p>Improved reliability — P2P acceleration makes video streaming more scalable, resistant to peak demands and failure situations.</p>
  </li>
</ul>

<h2 id="instructions">Instructions</h2>

<p><strong>Add P2P Media Loader script to your web page</strong></p>

<p>For HLS video:</p>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;script </span><span class="na">src=</span><span class="s">"https://cdn.jsdelivr.net/npm/p2p-media-loader-core@latest/build/p2p-media-loader-core.min.js"</span><span class="nt">&gt;&lt;/script&gt;</span>
<span class="nt">&lt;script </span><span class="na">src=</span><span class="s">"https://cdn.jsdelivr.net/npm/p2p-media-loader-hlsjs@latest/build/p2p-media-loader-hlsjs.min.js"</span><span class="nt">&gt;&lt;/script&gt;</span>
</code></pre></div></div>

<p>For MPEG-DASH video:</p>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;script </span><span class="na">src=</span><span class="s">"https://cdn.jsdelivr.net/npm/p2p-media-loader-core@latest/build/p2p-media-loader-core.min.js"</span><span class="nt">&gt;&lt;/script&gt;</span>
<span class="nt">&lt;script </span><span class="na">src=</span><span class="s">"https://cdn.jsdelivr.net/npm/p2p-media-loader-shaka@latest/build/p2p-media-loader-shaka.min.js"</span><span class="nt">&gt;&lt;/script&gt;</span>
</code></pre></div></div>

<p><strong>Integrate P2P Media Loader with your favorite player</strong></p>

<p><strong>P2P Media Loader</strong> supports many popular HTML5 video players and engines: <strong>Hls.js, Shaka Player, JWPlayer, Clappr, Flowplayer, MediaElement, Video.js.</strong> Let’s pick <strong>Clappr</strong> just for this example:</p>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;script&gt;</span>
<span class="kd">var</span> <span class="nx">engine</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">p2pml</span><span class="p">.</span><span class="nx">hlsjs</span><span class="p">.</span><span class="nx">Engine</span><span class="p">();</span>
<span class="kd">var</span> <span class="nx">player</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Clappr</span><span class="p">.</span><span class="nx">Player</span><span class="p">({</span>
  <span class="na">parentId</span><span class="p">:</span> <span class="s2">"#player"</span><span class="p">,</span>
  <span class="na">source</span><span class="p">:</span> <span class="s2">"https://akamai-axtest.akamaized.net/routes/lapd-v1-acceptance/www_c4/Manifest.m3u8"</span><span class="p">,</span>
  <span class="na">mute</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
  <span class="na">autoPlay</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
  <span class="na">playback</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">hlsjsConfig</span><span class="p">:</span> <span class="p">{</span>
      <span class="na">liveSyncDurationCount</span><span class="p">:</span> <span class="mi">7</span><span class="p">,</span>
      <span class="na">loader</span><span class="p">:</span> <span class="nx">engine</span><span class="p">.</span><span class="nx">createLoaderClass</span><span class="p">()</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">});</span>
<span class="nx">p2pml</span><span class="p">.</span><span class="nx">hlsjs</span><span class="p">.</span><span class="nx">initClapprPlayer</span><span class="p">(</span><span class="nx">player</span><span class="p">);</span>
<span class="nt">&lt;/script&gt;</span>
</code></pre></div></div>

<p>You can find <a href="https://github.com/Novage/p2p-media-loader/tree/master/p2p-media-loader-hlsjs#basic-usage">the full example</a> as well as examples for other players in the <a href="https://github.com/Novage/p2p-media-loader/">GitHub</a> repository of the project.</p>

<p>Now you can lean back and enjoy your P2P video streaming.</p>

<h2 id="whats-next">What’s next</h2>

<p>Getting better P2P video sharing ratios most likely requires tuning of both your video stream and P2P algorithm configuration.</p>

<p><strong>P2P Media Loader</strong> uses freely available in WebTorrent trackers to exchange connection data (SDP) between peers. This process is called WebRTC signaling. Using public trackers is fine for moderate (1000–2000) number of peers. But for higher loads, you have to run your personal tracker instances (for example <a href="https://github.com/Novage/wt-tracker">wt-tracker</a>).</p>

<p>You will learn how to improve P2P ratio, create your personal P2P video network and scale it to millions of peers in the next articles.</p>

</div>
        <footer class="footer">22 March 2019 | Andriy Lysnevych</footer>
    </div>
</article></div>
<footer id="footer">
    <div class="container">© 2019 Novage, LLC</div>
</footer>
</body>
</html>
